import React, {Component} from 'react'
import {connect} from 'react-redux'
import {search} from 'actions'

class Sidebar extends Component {

	state = {
		value: '',
	}

	handleSubmit(event) {
    	event.preventDefault();
    	this.props.search(this.state.value)
  	}

	render() {
		const {selectTr} = this.props
		return (
			<div className='main-form'>
				<form  onSubmit={this.handleSubmit.bind(this)}>
					<div className='form-group'>
						<input type='text' 
							   className='form-control'
							   onChange={(e) => this.setState({value: e.target.value})}
							   />
						<button type="submit" 
								className="btn btn-outline-dark "
							   >
							   	Найти
						</button>
					</div>
				</form> 			
				{selectTr && <div>  
					<p>Выбран пользователь <b>{selectTr.firstName + ' ' + selectTr.lastName}</b></p> 
					<p>Описание:</p>
					<textarea defaultValue={selectTr.description}>
					</textarea>
					<p>Адрес проживания: <b>{selectTr.address.streetAddress}</b></p>
					<p>Город: <b>{selectTr.address.city}</b></p>
					<p>Провинция/штат: <b>{selectTr.address.state}</b></p>
					<p>Индекс: <b>{selectTr.address.zip}</b></p>
				</div>}
			</div>
		)
	}
}

const mapStateToProps = state => ({
	selectTr: state.tablePage.select,
})

const mapDispatchToProps = {
	search,
}

export default connect(mapStateToProps, mapDispatchToProps)(Sidebar)