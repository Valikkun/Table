import React from 'react'
import {connect} from 'react-redux'
import {loadPage} from 'actions'
import {getTableLength} from 'selectors'

const Pages = ({tableLength, activePage, loadPage}) => {
	
	const renderPages = () => {
		const pages = []
		for (let i = 1; i <= Math.ceil(tableLength/50); i++) { //Считаем и создаём необходимое кол-во страниц 															
			pages.push(										   //исходя из длины массива данных
				<li key={i} 							 
					className='list-inline-item'
					>
					<button className={activePage === i ? 'btn btn-dark page-button' : 
														  'btn btn-outline-dark page-button'}
							onClick={()=>loadPage(i)} 
							>	
							{i}
					</button>
				</li>
			)
		}
		return pages
	}

	return (
		<div className='window'>
			<ul className='list-inline d-flex flex-nowrap'>
				{renderPages()}
			</ul>
		</div>
	)
}

const mapStateToProps = state => ({
	tableLength: getTableLength(state),
	activePage: state.tablePage.page,
})

const mapDispatchToProps = {
	loadPage,
}

export default connect(mapStateToProps, mapDispatchToProps)(Pages)