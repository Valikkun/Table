import React, {Component} from 'react'
import {connect} from 'react-redux'
import {fetchTable} from 'actions'

import Buttons from './Buttons'
import Table from './Table'
import Sidebar from './Sidebar'


class App extends Component {

	componentDidMount() {
		this.props.fetchTable()
	}

	render() {
		const {fetching, fetchFailure} = this.props
		return (
			<div className='container'>
				<div className='row'>
					<div className='col-md-2 col-sm-2'>
						<Sidebar />
					</div>
					<div className='col-md-10 col-sm-10 main__content'>
						<Buttons />
						{fetchFailure && <div className='failure-text'>Сорян данных нет</div>}
						{fetching && <div className='preloader'></div>}
						<Table />
					</div>
				</div>
			</div>
		)
	}
}

const mapStateToProps = state => ({
	fetchFailure: state.tablePage.failure,
	fetching: state.tablePage.fetching,
})

const mapDispatchToProps = {
	fetchTable,
}

export default connect(mapStateToProps, mapDispatchToProps)(App)