import {fetchTableApi, fetchBigTableApi} from 'api'

export const fetchTable = () => async dispatch => {
	dispatch({type: 'FETCH_TABLE_START'})

	try {
		const table = await fetchTableApi()
		dispatch({type: 'FETCH_TABLE_SUCCESS', payload: table})
	} catch (err) {
		dispatch({type: 'FETCH_TABLE_FAILURE', payload: err, error: true})
	}
}

export const fetchBigTable = () => async dispatch => {
	dispatch({type: 'FETCH_TABLE_START'})

	try {
		const table = await fetchBigTableApi()
		dispatch({type: 'FETCH_TABLE_SUCCESS', payload: table})
	} catch (err) {
		dispatch({type: 'FETCH_TABLE_FAILURE', payload: err, error: true})
	}
}

export const loadPage = (page) => dispatch => {
	dispatch({type: 'LOAD_PAGE', payload: page})
}

export const sort = i => dispatch => {
	dispatch({type: 'SORT', payload: i})
}

export const search = value => dispatch => {
	dispatch({type: 'SEARCH', payload: value})
}

export const select = tr => dispatch => {
	dispatch({type: 'SELECT', payload: tr})
}

export const testError = () => dispatch => {
	dispatch({type: 'FETCH_TABLE_FAILURE'})
}

export const deselect = () => dispatch => {
	dispatch({type: 'DESELECT'})
}

export const handleScroll = () => dispatch => {
	dispatch({type: 'SCROLL', payload: window.pageYOffset})
}